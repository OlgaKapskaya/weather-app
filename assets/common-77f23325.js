import{c as w,a as _,b as u,d as m,C as v,u as M,e as $,j as i,V as A,H as o,f as a,B as j,S as l,T as d,D as h,g as B,F,W as I,h as O,i as P,k as U,l as E,A as R}from"./vendor-903b4ec3.js";const Y={status:"idle",message:null},W=w({name:"app",initialState:Y,reducers:{setAppMessage(e,t){e.message=t.payload},setAppStatus(e,t){e.status=t.payload}}}),{setAppMessage:S,setAppStatus:c}=W.actions,ce=W.reducer,g=(e,t)=>{var n;const s=t;if(_.isAxiosError(s)){const r=(n=s.response)!=null&&n.data?s.response.data.error:s.message;e(S(r))}else e(S(`native error ${s.message}`));e(c("failed"))},C=_.create({baseURL:"https://api.openweathermap.org/data/2.5/"}),k={getSummary(e){return C.get(`weather?q=${e}&appid=d8b8feb797d8d7246525255551517358&units=metric`)},getHourly(e){return C.get(`forecast?q=${e}&appid=d8b8feb797d8d7246525255551517358&units=metric`)}},q={weather:[],currentDate:"",currentTime:"",currentCity:"",main:{},sunrise:"",sunset:"",wind:{},visibility:0,forecastList:[]},p=u("weather/getSummaryWeather",async(e,{dispatch:t})=>{t(c("loading"));try{const s=await k.getSummary(e);t(V({weather:s.data})),t(c("succeeded"))}catch(s){g(t,s)}}),oe=u("weather/getHourlyWeather",async(e,{dispatch:t})=>{t(c("loading"));try{const s=await k.getHourly(e);t(J({weather:s.data})),t(c("succeeded"))}catch(s){g(t,s)}}),N=u("weather/getCityFromLS",async(e,{dispatch:t})=>{const s=localStorage.getItem("current-city");if(s){const n=JSON.parse(s);t(f({city:n}))}}),le=u("weather/getWeather",async(e,{dispatch:t,getState:s})=>{t(N());const r=s().weather.currentCity;r?t(p(r)):(t(f({city:"Minsk"})),t(p("Minsk")))}),z=w({name:"weather",initialState:q,reducers:{setCurrentCity:(e,t)=>{e.currentCity=t.payload.city},setSummaryWeather:(e,t)=>{e.weather=t.payload.weather.weather,e.currentDate=m.unix(t.payload.weather.dt).format("DD.MM.YYYY"),e.currentTime=m.unix(t.payload.weather.dt).format("HH:mm"),e.main=t.payload.weather.main,e.sunrise=m.unix(t.payload.weather.sys.sunrise).format("HH:mm"),e.sunset=m.unix(t.payload.weather.sys.sunset).format("HH:mm"),e.wind=t.payload.weather.wind,e.visibility=t.payload.weather.visibility},setHourlyWeather:(e,t)=>{e.forecastList=t.payload.weather.list}}}),{setCurrentCity:f,setSummaryWeather:V,setHourlyWeather:J}=z.actions,de=z.reducer,G={cities:[],searchCities:[]},ue=u("cities/getCities",async(e,{dispatch:t})=>{t(c("loading"));try{const s=v.getAllCities();t(Q({cities:s})),t(c("succeeded"))}catch(s){g(t,s)}}),he=u("cities/findCity",(e,{dispatch:t,getState:s})=>{t(c("loading"));const n=s();try{const r=n.cities.cities.filter(y=>y.name.toUpperCase().startsWith(e.toUpperCase()));r.length>0?(t(X({cities:r})),t(c("succeeded"))):(t(c("failed")),t(S(`City "${e}" not found, try again`)))}catch(r){console.log(r),t(c("failed"))}}),me=u("cities/chooseCity",(e,{dispatch:t})=>{t(c("loading"));try{t(K(e)),t(p(e)),t(c("succeeded"))}catch(s){console.log(s),t(c("failed"))}}),K=u("cities/saveCurrentCity",async(e,{dispatch:t})=>{const s=JSON.stringify(e);localStorage.setItem("current-city",s),t(f({city:e}))}),H=w({name:"cities",initialState:G,reducers:{setCities:(e,t)=>{e.cities=t.payload.cities},setSearchCities:(e,t)=>{e.searchCities=t.payload.cities}}}),{setCities:Q,setSearchCities:X}=H.actions,ye=H.reducer,Se=()=>M(),b=$,L=e=>e.app.status,pe=e=>e.app.message,we={DETAILS:"hourly"},Z="_weatherContainer_cl9lf_1",ee="_stack_cl9lf_11",te="_header_cl9lf_18",ge={weatherContainer:Z,stack:ee,header:te},fe=e=>e.weather.weather,Ce=e=>e.weather.currentCity,xe=e=>e.weather.currentTime,_e=e=>e.weather.currentDate,Ae=e=>e.weather.main.temp,We=e=>e.weather.main.feels_like,ke=e=>e.weather.main.temp_min,ze=e=>e.weather.main.temp_max,He=e=>e.weather.main.pressure,be=e=>e.weather.main.humidity,Le=e=>e.weather.sunrise,Te=e=>e.weather.sunset,De=e=>e.weather.wind.speed,ve=e=>e.weather.visibility,Me=e=>e.weather.forecastList,x=e=>Math.round(e),se=({maxTemp:e,minTemp:t,sunset:s,sunrise:n})=>{const r=b(L);return i(A,{align:"start",width:"50%",minHeight:"100%",height:"171px",children:[i(o,{children:[a(j,{size:"30px"}),a(l,{isLoaded:r!=="loading",children:i(d,{fontSize:"xl",children:["Max temp: ",x(e)," Â°C"]})})]}),a(h,{}),i(o,{children:[a(B,{size:"30px"}),a(l,{isLoaded:r!=="loading",children:i(d,{fontSize:"xl",children:["Min temp: ",x(t)," Â°C"]})})]}),a(h,{}),n&&i(F,{children:[i(o,{children:[a(I,{size:"30px"}),a(l,{isLoaded:r!=="loading",children:i(d,{fontSize:"xl",children:["Sunrise: ",n]})})]}),a(h,{})]}),s&&i(o,{children:[a(O,{size:"30px"}),a(l,{isLoaded:r!=="loading",children:i(d,{fontSize:"xl",children:["Sunset: ",s]})})]})]})},ae=({pressure:e,windSpeed:t,visibility:s,humidity:n})=>{const r=b(L);return i(A,{align:"start",width:"50%",children:[i(o,{children:[a(P,{size:"30px"}),a(l,{isLoaded:r!=="loading",children:i(d,{fontSize:"xl",children:["Pressure: ",e," mb"]})})]}),a(h,{}),i(o,{children:[a(U,{size:"30px"}),a(l,{isLoaded:r!=="loading",children:i(d,{fontSize:"xl",children:["Humidity: ",n," %"]})})]}),a(h,{}),i(o,{children:[a(E,{size:"30px"}),a(l,{isLoaded:r!=="loading",children:i(d,{fontSize:"xl",children:["Wind speed: ",t," km/h"]})})]}),a(h,{}),i(o,{children:[a(R,{size:"30px"}),a(l,{isLoaded:r!=="loading",children:i(d,{fontSize:"xl",children:["Visibility: ",s/1e3," km"]})})]})]})},$e=({sunset:e,maxTemp:t,minTemp:s,sunrise:n,pressure:r,windSpeed:y,visibility:T,humidity:D})=>i(o,{justifyContent:"space-between",children:[a(se,{maxTemp:t,minTemp:s,sunrise:n,sunset:e}),a(ae,{pressure:r,windSpeed:y,humidity:D,visibility:T})]}),re="_stack_l42ei_1",ie="_header_l42ei_12",je={stack:re,header:ie};export{oe as A,ue as B,le as C,ce as D,de as E,ye as F,$e as O,we as P,b as a,pe as b,Ce as c,_e as d,Ae as e,We as f,L as g,x as h,he as i,me as j,X as k,ke as l,ze as m,Le as n,Te as o,He as p,be as q,De as r,S as s,xe as t,Se as u,ve as v,fe as w,ge as x,je as y,Me as z};

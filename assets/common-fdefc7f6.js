import{c as S,a as x,b as u,d as m,C as T,u as I,e as D,j as a,V as z,H as o,f as r,B as v,T as l,D as d,g as M,F as L,W as j,h as R,i as U,k as $,l as B,A as O}from"./vendor-facb715a.js";const P={status:"idle",message:null,isInitialized:!1},A=S({name:"app",initialState:P,reducers:{setAppMessage(e,t){e.message=t.payload},setAppStatus(e,t){e.status=t.payload},setAppInitialized(e,t){e.isInitialized=t.payload}}}),{setAppMessage:y,setAppStatus:c,setAppInitialized:E}=A.actions,se=A.reducer,w=(e,t)=>{var i;const s=t;if(x.isAxiosError(s)){const n=(i=s.response)!=null&&i.data?s.response.data.error:s.message;e(y(n))}else e(y(`native error ${s.message}`));e(c("failed"))},g=x.create({baseURL:"https://api.openweathermap.org/data/2.5/"}),H={getSummary(e){return g.get(`weather?q=${e}&appid=d8b8feb797d8d7246525255551517358&units=metric`)},getHourly(e){return g.get(`forecast?q=${e}&appid=d8b8feb797d8d7246525255551517358&units=metric`)}},F={weather:[],currentDate:"",currentTime:"",currentCity:"",main:{},sunrise:"",sunset:"",wind:{},visibility:0,forecastList:[]},p=u("weather/getSummaryWeather",async(e,{dispatch:t})=>{t(c("loading"));try{const s=await H.getSummary(e);t(Y({weather:s.data})),t(c("succeeded"))}catch(s){w(t,s)}}),ae=u("weather/getHourlyWeather",async(e,{dispatch:t})=>{t(c("loading"));try{const s=await H.getHourly(e);t(q({weather:s.data})),t(c("succeeded"))}catch(s){w(t,s)}}),N=u("weather/getCityFromLS",async(e,{dispatch:t})=>{const s=localStorage.getItem("current-city");if(s){const i=JSON.parse(s);t(f({city:i}))}}),re=u("weather/getWeather",async(e,{dispatch:t,getState:s})=>{t(N());const n=s().weather.currentCity;n?t(p(n)):(t(f({city:"Minsk"})),t(p("Minsk")))}),W=S({name:"weather",initialState:F,reducers:{setCurrentCity:(e,t)=>{e.currentCity=t.payload.city},setSummaryWeather:(e,t)=>{e.weather=t.payload.weather.weather,e.currentDate=m.unix(t.payload.weather.dt).format("DD.MM.YYYY"),e.currentTime=m.unix(t.payload.weather.dt).format("HH:mm"),e.main=t.payload.weather.main,e.sunrise=m.unix(t.payload.weather.sys.sunrise).format("HH:mm"),e.sunset=m.unix(t.payload.weather.sys.sunset).format("HH:mm"),e.wind=t.payload.weather.wind,e.visibility=t.payload.weather.visibility},setHourlyWeather:(e,t)=>{e.forecastList=t.payload.weather.list}}}),{setCurrentCity:f,setSummaryWeather:Y,setHourlyWeather:q}=W.actions,ie=W.reducer,V={cities:[]},ne=u("cities/getCities",async(e,{dispatch:t})=>{t(c("loading"));try{const s=T.getAllCities();t(G({cities:s})),t(c("succeeded"))}catch(s){w(t,s)}finally{t(E(!0))}}),ce=u("cities/findCity",(e,{dispatch:t,getState:s})=>{t(c("loading"));const i=s();try{const n=i.cities.cities.filter(h=>h.name.toUpperCase()===e.toUpperCase())[0];n?(t(J(n.name)),t(p(n.name)),t(c("succeeded"))):(t(c("failed")),t(y(`${e} not found, try again`)))}catch(n){console.log(n),t(c("failed"))}}),J=u("cities/saveCurrentCity",async(e,{dispatch:t})=>{const s=JSON.stringify(e);localStorage.setItem("current-city",s),t(f({city:e}))}),_=S({name:"cities",initialState:V,reducers:{setCities:(e,t)=>{e.cities=t.payload.cities}}}),{setCities:G}=_.actions,oe=_.reducer,le=()=>I(),ue={CURRENT:"current",DETAILS:"hourly"},K="_weatherContainer_cl9lf_1",Q="_stack_cl9lf_11",X="_header_cl9lf_18",de={weatherContainer:K,stack:Q,header:X},me=D,he=e=>e.weather.weather,ye=e=>e.weather.currentCity,pe=e=>e.weather.currentTime,Se=e=>e.weather.currentDate,we=e=>e.weather.main.temp,fe=e=>e.weather.main.feels_like,ge=e=>e.weather.main.temp_min,Ce=e=>e.weather.main.temp_max,xe=e=>e.weather.main.pressure,ze=e=>e.weather.main.humidity,Ae=e=>e.weather.sunrise,He=e=>e.weather.sunset,We=e=>e.weather.wind.speed,_e=e=>e.weather.visibility,be=e=>e.weather.forecastList,C=e=>Math.round(e),Z=({maxTemp:e,minTemp:t,sunset:s,sunrise:i})=>a(z,{align:"start",width:"50%",minHeight:"100%",height:"171px",children:[a(o,{children:[r(v,{size:"30px"}),a(l,{fontSize:"xl",children:["Max temp: ",C(e)," Â°C"]})]}),r(d,{}),a(o,{children:[r(M,{size:"30px"}),a(l,{fontSize:"xl",children:["Min temp: ",C(t)," Â°C"]})]}),r(d,{}),i&&a(L,{children:[a(o,{children:[r(j,{size:"30px"}),a(l,{fontSize:"xl",children:["Sunrise: ",i]})]}),r(d,{})]}),s&&a(o,{children:[r(R,{size:"30px"}),a(l,{fontSize:"xl",children:["Sunset: ",s]})]})]}),ee=({pressure:e,windSpeed:t,visibility:s,humidity:i})=>a(z,{align:"start",width:"50%",children:[a(o,{children:[r(U,{size:"30px"}),a(l,{fontSize:"xl",children:["Pressure: ",e," mb"]})]}),r(d,{}),a(o,{children:[r($,{size:"30px"}),a(l,{fontSize:"xl",children:["Humidity: ",i," %"]})]}),r(d,{}),a(o,{children:[r(B,{size:"30px"}),a(l,{fontSize:"xl",children:["Wind speed: ",t," km/h"]})]}),r(d,{}),a(o,{children:[r(O,{size:"30px"}),a(l,{fontSize:"xl",children:["Visibility: ",s/1e3," km"]})]})]}),ke=({sunset:e,maxTemp:t,minTemp:s,sunrise:i,pressure:n,windSpeed:h,visibility:b,humidity:k})=>a(o,{justifyContent:"space-between",children:[r(Z,{maxTemp:t,minTemp:s,sunrise:i,sunset:e}),r(ee,{pressure:n,windSpeed:h,humidity:k,visibility:b})]}),Te=e=>e.app.status,Ie=e=>e.app.isInitialized;export{ie as A,oe as B,ke as O,ue as P,we as a,C as b,ye as c,Se as d,Te as e,fe as f,le as g,ce as h,ge as i,He as j,ze as k,We as l,Ce as m,re as n,be as o,xe as p,ae as q,Ie as r,Ae as s,pe as t,me as u,_e as v,he as w,de as x,ne as y,se as z};

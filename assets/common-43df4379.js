import{c as w,a as A,b as u,d as m,C as v,u as M,e as j,j as i,V as z,H as o,f as a,B as R,S as l,T as d,D as h,g as U,F as $,W as I,h as O,i as P,k as B,l as E,A as F}from"./vendor-4197fc61.js";const N={status:"idle",message:null},H=w({name:"app",initialState:N,reducers:{setAppMessage(e,t){e.message=t.payload},setAppStatus(e,t){e.status=t.payload}}}),{setAppMessage:S,setAppStatus:c}=H.actions,re=H.reducer,g=(e,t)=>{var n;const s=t;if(A.isAxiosError(s)){const r=(n=s.response)!=null&&n.data?s.response.data.error:s.message;e(S(r))}else e(S(`native error ${s.message}`));e(c("failed"))},C=A.create({baseURL:"https://api.openweathermap.org/data/2.5/"}),W={getSummary(e){return C.get(`weather?q=${e}&appid=d8b8feb797d8d7246525255551517358&units=metric`)},getHourly(e){return C.get(`forecast?q=${e}&appid=d8b8feb797d8d7246525255551517358&units=metric`)}},Y={weather:[],currentDate:"",currentTime:"",currentCity:"",main:{},sunrise:"",sunset:"",wind:{},visibility:0,forecastList:[]},p=u("weather/getSummaryWeather",async(e,{dispatch:t})=>{t(c("loading"));try{const s=await W.getSummary(e);t(V({weather:s.data})),t(c("succeeded"))}catch(s){g(t,s)}}),ie=u("weather/getHourlyWeather",async(e,{dispatch:t})=>{t(c("loading"));try{const s=await W.getHourly(e);t(J({weather:s.data})),t(c("succeeded"))}catch(s){g(t,s)}}),q=u("weather/getCityFromLS",async(e,{dispatch:t})=>{const s=localStorage.getItem("current-city");if(s){const n=JSON.parse(s);t(f({city:n}))}}),ne=u("weather/getWeather",async(e,{dispatch:t,getState:s})=>{t(q());const r=s().weather.currentCity;r?t(p(r)):(t(f({city:"Minsk"})),t(p("Minsk")))}),_=w({name:"weather",initialState:Y,reducers:{setCurrentCity:(e,t)=>{e.currentCity=t.payload.city},setSummaryWeather:(e,t)=>{e.weather=t.payload.weather.weather,e.currentDate=m.unix(t.payload.weather.dt).format("DD.MM.YYYY"),e.currentTime=m.unix(t.payload.weather.dt).format("HH:mm"),e.main=t.payload.weather.main,e.sunrise=m.unix(t.payload.weather.sys.sunrise).format("HH:mm"),e.sunset=m.unix(t.payload.weather.sys.sunset).format("HH:mm"),e.wind=t.payload.weather.wind,e.visibility=t.payload.weather.visibility},setHourlyWeather:(e,t)=>{e.forecastList=t.payload.weather.list}}}),{setCurrentCity:f,setSummaryWeather:V,setHourlyWeather:J}=_.actions,ce=_.reducer,G={cities:[]},oe=u("cities/getCities",async(e,{dispatch:t})=>{t(c("loading"));try{const s=v.getAllCities();t(Q({cities:s})),t(c("succeeded"))}catch(s){g(t,s)}}),le=u("cities/findCity",(e,{dispatch:t,getState:s})=>{t(c("loading"));const n=s();try{const r=n.cities.cities.filter(y=>y.name.toUpperCase()===e.toUpperCase())[0];r?(t(K(r.name)),t(p(r.name)),t(c("succeeded"))):(t(c("failed")),t(S(`${e} not found, try again`)))}catch(r){console.log(r),t(c("failed"))}}),K=u("cities/saveCurrentCity",async(e,{dispatch:t})=>{const s=JSON.stringify(e);localStorage.setItem("current-city",s),t(f({city:e}))}),b=w({name:"cities",initialState:G,reducers:{setCities:(e,t)=>{e.cities=t.payload.cities}}}),{setCities:Q}=b.actions,de=b.reducer,ue=()=>M(),he={CURRENT:"current",DETAILS:"hourly"},X="_weatherContainer_cl9lf_1",Z="_stack_cl9lf_11",ee="_header_cl9lf_18",me={weatherContainer:X,stack:Z,header:ee},k=j,ye=e=>e.weather.weather,Se=e=>e.weather.currentCity,pe=e=>e.weather.currentTime,we=e=>e.weather.currentDate,ge=e=>e.weather.main.temp,fe=e=>e.weather.main.feels_like,Ce=e=>e.weather.main.temp_min,xe=e=>e.weather.main.temp_max,Ae=e=>e.weather.main.pressure,ze=e=>e.weather.main.humidity,He=e=>e.weather.sunrise,We=e=>e.weather.sunset,_e=e=>e.weather.wind.speed,be=e=>e.weather.visibility,ke=e=>e.weather.forecastList,x=e=>Math.round(e),L=e=>e.app.status,te=({maxTemp:e,minTemp:t,sunset:s,sunrise:n})=>{const r=k(L);return i(z,{align:"start",width:"50%",minHeight:"100%",height:"171px",children:[i(o,{children:[a(R,{size:"30px"}),a(l,{isLoaded:r!=="loading",children:i(d,{fontSize:"xl",children:["Max temp: ",x(e)," °C"]})})]}),a(h,{}),i(o,{children:[a(U,{size:"30px"}),a(l,{isLoaded:r!=="loading",children:i(d,{fontSize:"xl",children:["Min temp: ",x(t)," °C"]})})]}),a(h,{}),n&&i($,{children:[i(o,{children:[a(I,{size:"30px"}),a(l,{isLoaded:r!=="loading",children:i(d,{fontSize:"xl",children:["Sunrise: ",n]})})]}),a(h,{})]}),s&&i(o,{children:[a(O,{size:"30px"}),a(l,{isLoaded:r!=="loading",children:i(d,{fontSize:"xl",children:["Sunset: ",s]})})]})]})},se=({pressure:e,windSpeed:t,visibility:s,humidity:n})=>{const r=k(L);return i(z,{align:"start",width:"50%",children:[i(o,{children:[a(P,{size:"30px"}),a(l,{isLoaded:r!=="loading",children:i(d,{fontSize:"xl",children:["Pressure: ",e," mb"]})})]}),a(h,{}),i(o,{children:[a(B,{size:"30px"}),a(l,{isLoaded:r!=="loading",children:i(d,{fontSize:"xl",children:["Humidity: ",n," %"]})})]}),a(h,{}),i(o,{children:[a(E,{size:"30px"}),a(l,{isLoaded:r!=="loading",children:i(d,{fontSize:"xl",children:["Wind speed: ",t," km/h"]})})]}),a(h,{}),i(o,{children:[a(F,{size:"30px"}),a(l,{isLoaded:r!=="loading",children:i(d,{fontSize:"xl",children:["Visibility: ",s/1e3," km"]})})]})]})},Le=({sunset:e,maxTemp:t,minTemp:s,sunrise:n,pressure:r,windSpeed:y,visibility:T,humidity:D})=>i(o,{justifyContent:"space-between",children:[a(te,{maxTemp:t,minTemp:s,sunrise:n,sunset:e}),a(se,{pressure:r,windSpeed:y,humidity:D,visibility:T})]});export{de as A,Le as O,he as P,ge as a,L as b,Se as c,we as d,x as e,fe as f,ue as g,le as h,Ce as i,We as j,ze as k,_e as l,xe as m,ke as n,ie as o,Ae as p,oe as q,ne as r,He as s,pe as t,k as u,be as v,ye as w,me as x,re as y,ce as z};

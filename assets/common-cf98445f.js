import{c as w,a as A,b as u,d as m,C as D,u as M,e as $,j as i,V as _,H as c,f as a,B as j,S as l,T as d,D as h,g as F,F as B,W as I,h as O,i as P,k as U,l as E,A as R}from"./vendor-8beb7045.js";const Y={status:"idle",message:null},W=w({name:"app",initialState:Y,reducers:{setAppMessage(e,t){e.message=t.payload},setAppStatus(e,t){e.status=t.payload}}}),{setAppMessage:S,setAppStatus:n}=W.actions,le=W.reducer,g=(e,t)=>{var o;const s=t;if(A.isAxiosError(s)){const r=(o=s.response)!=null&&o.data?s.response.data.error:s.message;e(S(r))}else e(S(`native error ${s.message}`));e(n("failed"))},f=A.create({baseURL:"https://api.openweathermap.org/data/2.5/"}),z={getSummary(e){return f.get(`weather?q=${e}&appid=d8b8feb797d8d7246525255551517358&units=metric`)},getHourly(e){return f.get(`forecast?q=${e}&appid=d8b8feb797d8d7246525255551517358&units=metric`)}},q=e=>{const t=localStorage.getItem(e);if(t)return JSON.parse(t)},N={weather:[],currentDate:"",currentTime:"",currentCity:"",main:{},sunrise:"",sunset:"",wind:{},visibility:0,forecastList:[]},p=u("weather/getSummaryWeather",async(e,{dispatch:t})=>{t(n("loading"));try{const s=await z.getSummary(e);t(J({weather:s.data})),t(n("succeeded"))}catch(s){g(t,s)}}),de=u("weather/getHourlyWeather",async(e,{dispatch:t})=>{t(n("loading"));try{const s=await z.getHourly(e);t(G({weather:s.data})),t(n("succeeded"))}catch(s){g(t,s)}}),V=u("weather/getCityFromLS",async(e,{dispatch:t})=>{const s=q("current-city");s&&t(C({city:s}))}),ue=u("weather/getWeather",async(e,{dispatch:t,getState:s})=>{t(V());const r=s().weather.currentCity;r?t(p(r)):(t(C({city:"Minsk"})),t(p("Minsk")))}),H=w({name:"weather",initialState:N,reducers:{setCurrentCity:(e,t)=>{e.currentCity=t.payload.city},setSummaryWeather:(e,t)=>{e.weather=t.payload.weather.weather,e.currentDate=m.unix(t.payload.weather.dt).format("DD.MM.YYYY"),e.currentTime=m.unix(t.payload.weather.dt).format("HH:mm"),e.main=t.payload.weather.main,e.sunrise=m.unix(t.payload.weather.sys.sunrise).format("HH:mm"),e.sunset=m.unix(t.payload.weather.sys.sunset).format("HH:mm"),e.wind=t.payload.weather.wind,e.visibility=t.payload.weather.visibility},setHourlyWeather:(e,t)=>{e.forecastList=t.payload.weather.list}}}),{setCurrentCity:C,setSummaryWeather:J,setHourlyWeather:G}=H.actions,he=H.reducer,K=(e,t)=>{const s=JSON.stringify(e);localStorage.setItem(t,s)},Q={cities:[],searchCities:[]},me=u("cities/getCities",async(e,{dispatch:t})=>{t(n("loading"));try{const s=D.getAllCities();t(Z({cities:s})),t(n("succeeded"))}catch(s){g(t,s)}}),ye=u("cities/findCity",(e,{dispatch:t,getState:s})=>{t(n("loading"));const o=s();try{const r=o.cities.cities.filter(y=>y.name.toUpperCase().startsWith(e.toUpperCase()));r.length>0?(t(ee({cities:r})),t(n("succeeded"))):(t(n("failed")),t(S(`City "${e}" not found, try again`)))}catch(r){console.log(r),t(n("failed"))}}),Se=u("cities/chooseCity",(e,{dispatch:t})=>{t(n("loading"));try{t(X(e)),t(p(e)),t(n("succeeded"))}catch(s){console.log(s),t(n("failed"))}}),X=u("cities/saveCurrentCity",async(e,{dispatch:t})=>{K(e,"current-city"),t(C({city:e}))}),k=w({name:"cities",initialState:Q,reducers:{setCities:(e,t)=>{e.cities=t.payload.cities},setSearchCities:(e,t)=>{e.searchCities=t.payload.cities}}}),{setCities:Z,setSearchCities:ee}=k.actions,pe=k.reducer,we=()=>M(),L=$,b=e=>e.app.status,ge=e=>e.app.message,Ce={DETAILS:"hourly"},te="_weatherContainer_5md39_1",se="_stack_5md39_9",ae="_header_5md39_16",fe={weatherContainer:te,stack:se,header:ae},xe=e=>e.weather.weather,Ae=e=>e.weather.currentCity,_e=e=>e.weather.currentTime,We=e=>e.weather.currentDate,ze=e=>e.weather.main.temp,He=e=>e.weather.main.feels_like,ke=e=>e.weather.main.temp_min,Le=e=>e.weather.main.temp_max,be=e=>e.weather.main.pressure,Te=e=>e.weather.main.humidity,ve=e=>e.weather.sunrise,De=e=>e.weather.sunset,Me=e=>e.weather.wind.speed,$e=e=>e.weather.visibility,je=e=>e.weather.forecastList,x=e=>Math.round(e),re=({maxTemp:e,minTemp:t,sunset:s,sunrise:o})=>{const r=L(b);return i(_,{align:"start",width:"50%",minHeight:"100%",height:"171px",children:[i(c,{children:[a(j,{size:"30px"}),a(l,{isLoaded:r!=="loading",children:i(d,{fontSize:"xl",children:["Max temp: ",x(e)," Â°C"]})})]}),a(h,{}),i(c,{children:[a(F,{size:"30px"}),a(l,{isLoaded:r!=="loading",children:i(d,{fontSize:"xl",children:["Min temp: ",x(t)," Â°C"]})})]}),a(h,{}),o&&i(B,{children:[i(c,{children:[a(I,{size:"30px"}),a(l,{isLoaded:r!=="loading",children:i(d,{fontSize:"xl",children:["Sunrise: ",o]})})]}),a(h,{})]}),s&&i(c,{children:[a(O,{size:"30px"}),a(l,{isLoaded:r!=="loading",children:i(d,{fontSize:"xl",children:["Sunset: ",s]})})]})]})},ie=({pressure:e,windSpeed:t,visibility:s,humidity:o})=>{const r=L(b);return i(_,{align:"start",width:"50%",children:[i(c,{children:[a(P,{size:"30px"}),a(l,{isLoaded:r!=="loading",children:i(d,{fontSize:"xl",children:["Pressure: ",e," mb"]})})]}),a(h,{}),i(c,{children:[a(U,{size:"30px"}),a(l,{isLoaded:r!=="loading",children:i(d,{fontSize:"xl",children:["Humidity: ",o," %"]})})]}),a(h,{}),i(c,{children:[a(E,{size:"30px"}),a(l,{isLoaded:r!=="loading",children:i(d,{fontSize:"xl",children:["Wind speed: ",t," m/s"]})})]}),a(h,{}),i(c,{children:[a(R,{size:"30px"}),a(l,{isLoaded:r!=="loading",children:i(d,{fontSize:"xl",children:["Visibility: ",s/1e3," km"]})})]})]})},Fe=({sunset:e,maxTemp:t,minTemp:s,sunrise:o,pressure:r,windSpeed:y,visibility:T,humidity:v})=>i(c,{justifyContent:"space-between",children:[a(re,{maxTemp:t,minTemp:s,sunrise:o,sunset:e}),a(ie,{pressure:r,windSpeed:y,humidity:v,visibility:T})]}),ne="_stack_l42ei_1",oe="_header_l42ei_12",Be={stack:ne,header:oe};export{de as A,me as B,ue as C,le as D,he as E,pe as F,Fe as O,Ce as P,L as a,ge as b,Ae as c,We as d,ze as e,He as f,b as g,x as h,ye as i,Se as j,ee as k,ke as l,Le as m,ve as n,De as o,be as p,Te as q,Me as r,S as s,_e as t,we as u,$e as v,xe as w,fe as x,Be as y,je as z};
